<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo Interactivo: Hipérbole</title>

    <!-- Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        
    <style>
        /* --- Archivo CSS Completo Integrado --- */

        /* --- 1. Variables Globales para Theming --- */
        :root {
            --primary-bg-light: #f4f4f9; --primary-text-light: #333; --card-bg-light: #ffffff; --header-bg-light: #ffffff; --accent-color: #007bff; --mark-bg-light: #ffe066; --border-color-light: #e0e0e0; --success-bg-light: #e6ffed;
            --primary-bg-dark: #121212; --primary-text-dark: #e0e0e0; --card-bg-dark: #1e1e1e; --header-bg-dark: #1e1e1e; --mark-bg-dark: #b38f00; --border-color-dark: #333; --success-bg-dark: #1c3b29;
        }

        /* --- 2. Estilos Base y Theming del Body --- */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; transition: background-color 0.3s, color 0.3s; line-height: 1.6; word-wrap: break-word; overflow-wrap: break-word; }
        body.light-mode { background-color: var(--primary-bg-light); color: var(--primary-text-light); }
        body.dark-mode { background-color: var(--primary-bg-dark); color: var(--primary-text-dark); }

        /* --- 3. Estructura Principal (Header, Container, Footer) --- */
        .main-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        body.light-mode .main-header { background-color: var(--header-bg-light); }
        body.dark-mode .main-header { background-color: var(--header-bg-dark); }
        .main-header h1 { font-size: 1.2rem; margin: 0; text-align: center; }
        .theme-toggle-btn { background-color: var(--accent-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-size: 1rem; width: 45px; text-align: center; }
        .main-footer { text-align: center; padding: 1rem; margin-top: 2rem; font-size: 0.9rem; }
        .container { max-width: 1080px; margin: 1rem auto; padding: 0 1rem; }

        /* --- 4. Estilos de los Módulos y Contenido --- */
        .module-section { padding: 1.5rem; border-radius: 8px; margin-bottom: 1.5rem; box-shadow: 7px 7px 27px 2px rgba(0,0,0,0.1); }
        body.light-mode .module-section { background-color: var(--card-bg-light); border: 1px solid var(--border-color-light); }
        body.dark-mode .module-section { background-color: var(--card-bg-dark); border: 1px solid var(--border-color-dark); }
        .module-section h2 { margin-top: 0; color: var(--accent-color); border-bottom: 2px solid var(--accent-color); padding-bottom: 0.5rem; font-size: 1.3rem; }
        .back-link { text-decoration: none; color: var(--accent-color); font-weight: bold; font-size: 0.9rem; }
        mark { padding: 0.2em 0.4em; border-radius: 3px; }
        body.light-mode mark { background-color: var(--mark-bg-light); }
        body.dark-mode mark { background-color: var(--mark-bg-dark); color: var(--primary-text-dark); }
        .formula { text-align: center; font-size: 1rem; padding: 1rem; border: 2px dashed var(--accent-color); border-radius: 5px; margin: 1rem 0; }
        .bible-example { margin-top: 1.5rem; }
        .bible-example em { display: block; padding-left: 1rem; border-left: 3px solid #ccc; margin-bottom: 0.5rem; font-style: italic; }
        .module-section ul { list-style: none; padding-left: 0; }
        .module-section li { display: flex; align-items: flex-start; gap: 10px; margin-bottom: 0.5rem; }
        .fa-fw { text-align: center; }
        h1, h2, .back-link, .exercise button, .bible-example p, .formula p, #mini-quiz-form button, #transform-btn { display: flex; align-items: center; justify-content: center; gap: 10px; }

        /* --- 5. Estilos para Ejercicio Práctico y Feedback --- */
        .exercise textarea { width: 100%; box-sizing: border-box; padding: 0.5rem; border-radius: 5px; border: 1px solid #ccc; margin: 1rem 0; font-size: 1rem; }
        .exercise .buttons-container { display: flex; flex-wrap: wrap; gap: 10px; }
        .exercise button { background-color: var(--accent-color); color: white; border: none; padding: 0.7rem 1.5rem; border-radius: 5px; cursor: pointer; flex-grow: 1; }
        #show-answer-btn { background-color: #6c757d; }
        .feedback { margin-top: 1rem; font-weight: bold; min-height: 1.2em; }
        .correct-answer-box { margin-top: 1rem; padding: 1rem; border-radius: 5px; }
        body.light-mode .correct-answer-box { background-color: var(--success-bg-light); border: 1px solid green; }
        body.dark-mode .correct-answer-box { background-color: var(--success-bg-dark); border: 1px solid #3d8b40; }

        /* --- 6. Estilos para Secciones Interactivas Nuevas --- */
        .comparison-box { text-align: center; }
        .comparison-box h4 { margin-bottom: 0.5rem; }
        .comparison-box p { font-size: 1.2rem; font-style: italic; }
        #transform-btn { margin-top: 1rem; background-color: var(--accent-color); color: white; border: none; padding: 0.7rem 1.5rem; border-radius: 5px; cursor: pointer;}
        
        .interactive-part { cursor: pointer; padding: 0.1em 0.3em; border-radius: 3px; transition: background-color 0.3s; border-bottom: 2px dotted var(--accent-color); }
        .interactive-part.found { background-color: var(--mark-bg-light); color: #333; border-bottom: none; cursor: default; }
        body.dark-mode .interactive-part.found { background-color: var(--mark-bg-dark); color: var(--primary-text-dark); }
        .feedback-finder { font-weight: bold; color: green; font-size: 0.9em; min-height: 1em; margin-top: 0.5em; text-align: center;}
        .sentence-container { margin-bottom: 1rem; text-align: center; font-size: 1.1rem;}
        
        .quiz-question { margin-bottom: 1.5rem; }
        .quiz-question p { margin-bottom: 0.5rem; }
        .quiz-question label { display: block; margin-bottom: 0.5rem; cursor: pointer; }
        #mini-quiz-form button { background-color: var(--accent-color); color: white; border: none; padding: 0.7rem 1.5rem; border-radius: 5px; cursor: pointer; margin-top: 1rem; }

        /* --- 7. Botón Flotante (FAB) --- */
        .fab-container { position: fixed; bottom: 1rem; right: 1rem; z-index: 1001; }
        .fab { background-color: var(--accent-color); color: white; border: none; border-radius: 50%; width: 50px; height: 50px; font-size: 1.2rem; text-align: center; box-shadow: 0 4px 8px rgba(0,0,0,0.2); cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* --- 8. Media Queries para Responsividad --- */
        @media (min-width: 768px) {
            .main-header { padding: 1rem 2rem; }
            .main-header h1 { font-size: 1.5rem; }
            .container { margin: 2rem auto; }
            .module-section { padding: 2rem; }
            .exercise .buttons-container { flex-wrap: nowrap; }
            .exercise button { flex-grow: 0; }
            .fab-container { bottom: 2rem; right: 2rem; }
            .fab { width: 60px; height: 60px; font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <a href="../index.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Volver</a>
        <h1><i class="fa-solid fa-bullhorn"></i>Hipérbole</h1>
        <button id="theme-toggle" class="theme-toggle-btn" title="Cambiar tema"><i class="fa-solid fa-moon"></i></button>
    </header>

    <main class="container" id="module-content">
       
        <section class="module-section">
            <h2><i class="fa-solid fa-circle-question"></i>1. ¿Qué es una Hipérbole?</h2>
            <p>La hipérbole es una figura que consiste en <strong>exagerar de forma intencionada</strong> una idea, un sentimiento o una situación, con el objetivo de enfatizarla y causar un mayor impacto. No busca ser tomada literalmente, sino transmitir una gran intensidad.</p>
            <div class="formula">
                <p><i class="fa-solid fa-arrow-up-right-dots"></i><strong>Realidad</strong> + <mark>Exageración Extrema</mark> = <strong>Énfasis o Impacto</strong></p>
            </div>
            <p>Por ejemplo, si decimos "Te lo he dicho <mark>un millón de veces</mark>", no significa que lo hayamos repetido literalmente esa cantidad, sino que usamos la exageración para subrayar nuestra frustración.</p>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-comments"></i>2. Ejemplos</h2>
            <h3>En la Vida Cotidiana</h3>
            <ul>
                <li><i class="fa-solid fa-utensils fa-fw"></i>"Tengo tanta hambre que <mark>me comería un caballo</mark>."</li>
                <li><i class="fa-solid fa-face-laugh-beam fa-fw"></i>"Casi <mark>muero de la risa</mark>."</li>
                <li><i class="fa-solid fa-weight-hanging fa-fw"></i>"Esta maleta <mark>pesa una tonelada</mark>."</li>
            </ul>
             <hr style="margin: 2rem 0;">
             <h3>En la Biblia (Reina Valera 1960)</h3>
            <div class="bible-example">
                <em>"...ciudades grandes y <mark>amuralladas hasta el cielo</mark>..." (Deuteronomio 1:28)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> La exageración transmite el inmenso tamaño de las murallas y el miedo que infundían.</p>
            </div>
            <div class="bible-example">
                <em>"Me he consumido a fuerza de gemir; todas las noches <mark>inundo de llanto mi lecho</mark>..." (Salmo 6:6)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> La hipérbole expresa una tristeza y angustia de una profundidad inmensa, mucho más allá de las palabras.</p>
            </div>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-wand-magic-sparkles"></i>3. El Poder del Efecto: Antes y Después</h2>
            <p>Observa cómo la hipérbole inyecta emoción y énfasis en una idea simple. Haz clic en el botón para ver la transformación.</p>
            <div class="comparison-box">
                <div id="before-text">
                    <h4><i class="fa-solid fa-align-left"></i>Versión Literal</h4>
                    <p>Estoy muy cansado.</p>
                </div>
                <div id="after-text" style="display: none;">
                    <h4><i class="fa-solid fa-angles-right"></i>Versión con Hipérbole</h4>
                    <p>Estoy <mark>muerto de cansancio</mark>.</p>
                </div>
                <button id="transform-btn"><i class="fa-solid fa-repeat"></i>Mostrar Efecto</button>
            </div>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-mouse-pointer"></i>4. ¡Ahora tú! Identifícala</h2>
            <p>Haz clic en la frase o palabra que contiene la exageración en cada oración.</p>
            <div id="interactive-finder">
                <div class="sentence-container">
                    <p class="find-me">Te he esperado <span class="interactive-part">mil años</span>.</p>
                    <p class="feedback-finder"></p>
                </div>
                <div class="sentence-container">
                    <p class="find-me">La noticia <span class="interactive-part">me rompió el corazón</span>.</p>
                    <p class="feedback-finder"></p>
                </div>
                <div class="sentence-container">
                    <p class="find-me">¡Tienes <span class="interactive-part">una montaña de tarea</span>!</p>
                    <p class="feedback-finder"></p>
                </div>
            </div>
        </section>

        <section class="module-section exercise">
            <h2><i class="fa-solid fa-pencil-alt"></i>5. Ejercicio Práctico</h2>
            <p>Lee el siguiente pasaje. Identifica la idea exagerada y explica qué sentimiento o idea real busca enfatizar.</p>
            <p><em>"También vimos allí gigantes... y éramos nosotros, a nuestro parecer, <mark>como langostas</mark>..." (Números 13:33)</em></p>
            <textarea id="exercise-answer" rows="10" placeholder="Idea Exagerada: ...&#10;Sentimiento que enfatiza: ...&#10;Explicación: ..."></textarea>
            <div class="buttons-container">
                <button id="check-answer-btn"><i class="fa-solid fa-check-circle"></i>Verificar Respuesta</button>
                <button id="show-answer-btn" style="display: none;"><i class="fa-solid fa-eye"></i>Ver Respuesta Correcta</button>
            </div>
            <p id="feedback" class="feedback"></p>
            <div id="correct-answer" class="correct-answer-box" style="display: none;">
                <h4>Respuesta Detallada:</h4>
                <p><strong>Idea Exagerada:</strong> Compararse a sí mismos con "langostas" al lado de los gigantes.</p>
                <p><strong>Sentimiento que enfatiza:</strong> Un miedo extremo, una sensación de insignificancia y una total falta de confianza.</p>
                <p><strong>Explicación:</strong> La hipérbole comunica que se sentían aplastantemente pequeños, débiles e indefensos, justificando así su miedo.</p>
            </div>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-clipboard-question"></i>6. Mini-Quiz Rápido</h2>
            <p>¡Pongamos a prueba lo aprendido! Elige la respuesta correcta.</p>
            <form id="mini-quiz-form">
                <div class="quiz-question">
                    <p><strong>1. ¿Cuál es el propósito principal de la hipérbole?</strong></p>
                    <label><input type="radio" name="q1" value="a"> Describir algo con precisión literal.</label><br>
                    <label><input type="radio" name="q1" value="b"> Comparar dos cosas usando "como".</label><br>
                    <label><input type="radio" name="q1" value="c"> Crear énfasis a través de una exageración intencionada.</label><br>
                </div>
                <div class="quiz-question">
                    <p><strong>2. ¿Cuál de estas frases contiene una hipérbole?</strong></p>
                    <label><input type="radio" name="q2" value="a"> El coche es rápido como el viento.</label><br>
                    <label><input type="radio" name="q2" value="b"> Esta maleta pesa una tonelada.</label><br>
                    <label><input type="radio" name="q2" value="c"> El sol es una bola de fuego.</label><br>
                </div>
                <button type="submit"><i class="fa-solid fa-paper-plane"></i>Enviar Quiz</button>
            </form>
            <div id="quiz-results" class="correct-answer-box" style="display:none; margin-top: 1rem;"></div>
        </section>
    </main>
    
    <div class="fab-container">
        <button id="download-pdf" class="fab" title="Descargar como PDF"><i class="fa-solid fa-file-pdf"></i></button>
    </div>

    <footer class="main-footer">
        <p>&copy; 2025 - Estudio de Figuras Literarias | Desarrollado por Julio Cesar Pineda Mora</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- LÓGICA 1: MANEJO DEL TEMA (MODO OSCURO/CLARO) ---
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const applyTheme = (theme) => {
                document.body.classList.remove('light-mode', 'dark-mode');
                document.body.classList.add(theme);
                localStorage.setItem('theme', theme);
                themeIcon.className = theme === 'dark-mode' ? 'fa-solid fa-sun' : 'fa-solid fa-moon';
                themeToggle.title = theme === 'dark-mode' ? 'Cambiar a modo claro' : 'Cambiar a modo oscuro';
            };
            themeToggle.addEventListener('click', () => {
                applyTheme(document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode');
            });
            applyTheme(localStorage.getItem('theme') || 'light-mode');

            // --- LÓGICA 2: EJERCICIO PRÁCTICO ---
            const checkAnswerBtn = document.getElementById('check-answer-btn');
            const showAnswerBtn = document.getElementById('show-answer-btn');
            const feedbackEl = document.getElementById('feedback');
            const correctAnswerEl = document.getElementById('correct-answer');
            checkAnswerBtn.addEventListener('click', () => {
                const answer = document.getElementById('exercise-answer').value.toLowerCase();
                showAnswerBtn.style.display = 'none';
                correctAnswerEl.style.display = 'none';
                if (answer.includes("langostas") && (answer.includes("miedo") || answer.includes("pequeños") || answer.includes("insignificancia"))) {
                    feedbackEl.textContent = "¡Muy bien! Has captado la esencia de la exageración y su propósito.";
                    feedbackEl.style.color = 'var(--accent-color)';
                } else {
                    feedbackEl.textContent = "Casi lo tienes. Piensa en la exageración y el sentimiento que transmite.";
                    feedbackEl.style.color = 'red';
                    showAnswerBtn.style.display = 'inline-block';
                }
            });
            showAnswerBtn.addEventListener('click', () => {
                correctAnswerEl.style.display = 'block';
                showAnswerBtn.style.display = 'none';
            });

            // --- LÓGICA 3: GENERADOR DE PDF ---
            document.getElementById('download-pdf').addEventListener('click', () => {
                const fabContainer = document.querySelector('.fab-container');
                const content = document.getElementById('module-content');
                const downloadBtn = document.getElementById('download-pdf');
                const originalIcon = downloadBtn.innerHTML;
                fabContainer.style.visibility = 'hidden';
                downloadBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
                const opt = {
                    margin: 10, filename: 'modulo-hiperbole.pdf', image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true, letterRendering: true }, jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                    pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
                };
                html2pdf().from(content).set(opt).save().then(() => {
                    fabContainer.style.visibility = 'visible';
                    downloadBtn.innerHTML = originalIcon;
                }).catch(err => {
                    console.error("Error al generar el PDF:", err);
                    fabContainer.style.visibility = 'visible';
                    downloadBtn.innerHTML = originalIcon;
                });
            });

            // --- LÓGICA 4: SECCIONES INTERACTIVAS NUEVAS ---

            // "Antes y Después"
            const transformBtn = document.getElementById('transform-btn');
            if (transformBtn) {
                const beforeText = document.getElementById('before-text');
                const afterText = document.getElementById('after-text');
                transformBtn.addEventListener('click', () => {
                    if (afterText.style.display === 'none') {
                        beforeText.style.display = 'none';
                        afterText.style.display = 'block';
                        transformBtn.innerHTML = '<i class="fa-solid fa-rotate-left"></i> Mostrar Original';
                    } else {
                        beforeText.style.display = 'block';
                        afterText.style.display = 'none';
                        transformBtn.innerHTML = '<i class="fa-solid fa-repeat"></i> Mostrar Efecto';
                    }
                });
            }

            // "Identifícalo"
            document.querySelectorAll('.sentence-container').forEach(container => {
                const partsToFind = container.querySelectorAll('.interactive-part');
                const feedbackFinderEl = container.querySelector('.feedback-finder');
                let foundCount = 0;
                partsToFind.forEach(part => {
                    part.addEventListener('click', (e) => {
                        e.stopPropagation(); // Previene que el evento se propague si hay otros listeners
                        if (!part.classList.contains('found')) {
                            part.classList.add('found');
                            foundCount++;
                            if (foundCount === partsToFind.length) {
                                feedbackFinderEl.textContent = '¡Correcto! Has encontrado la exageración.';
                            }
                        }
                    }, { once: true });
                });
            });

            // "Mini-Quiz Rápido"
            const quizForm = document.getElementById('mini-quiz-form');
            if (quizForm) {
                quizForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const correctAnswers = { q1: 'c', q2: 'b' };
                    let score = 0;
                    const totalQuestions = Object.keys(correctAnswers).length;
                    const formData = new FormData(quizForm);
                    for (const [question, userAnswer] of formData.entries()) {
                        if (userAnswer === correctAnswers[question]) {
                            score++;
                        }
                    }
                    const resultsEl = document.getElementById('quiz-results');
                    resultsEl.innerHTML = `<h4>Resultados del Quiz</h4><p>Has acertado <strong>${score}</strong> de <strong>${totalQuestions}</strong> preguntas.</p>`;
                    if (score === totalQuestions) {
                        resultsEl.innerHTML += "<p>¡Excelente! Has entendido perfectamente la hipérbole.</p>";
                    } else {
                        resultsEl.innerHTML += "<p>¡Buen intento! Repasa los ejemplos para afianzar el concepto.</p>";
                    }
                    resultsEl.style.display = 'block';
                });
            }
        });
    </script>
</body>
</html>
