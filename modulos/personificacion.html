<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personificación</title>

    <!-- Añadido: Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --primary-bg-light: #f4f4f9; --primary-text-light: #333; --card-bg-light: #ffffff; --header-bg-light: #ffffff; --accent-color: #007bff; --mark-bg-light: #ffe066; --border-color-light: #e0e0e0; --success-bg-light: #e6ffed;
            --primary-bg-dark: #121212; --primary-text-dark: #e0e0e0; --card-bg-dark: #1e1e1e; --header-bg-dark: #1e1e1e; --mark-bg-dark: #b38f00; --border-color-dark: #333; --success-bg-dark: #1c3b29;
            /* Añadido: Variable para la sombra para controlarla fácilmente */
            --shadow-color: rgba(0, 0, 0, 0.15); 
        }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; transition: background-color 0.3s, color 0.3s; line-height: 1.6; }
        body.light-mode { background-color: var(--primary-bg-light); color: var(--primary-text-light); }
        body.dark-mode { background-color: var(--primary-bg-dark); color: var(--primary-text-dark); --shadow-color: rgba(0, 0, 0, 0.5); }
        .main-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); position: sticky; top: 0; z-index: 1000; }
        body.light-mode .main-header { background-color: var(--header-bg-light); }
        body.dark-mode .main-header { background-color: var(--header-bg-dark); }
        .main-header h1 { font-size: 1.5rem; margin: 0; }
        .theme-toggle-btn { background-color: var(--accent-color); color: white; border: none; padding: 0.5rem 1rem; border-radius: 5px; cursor: pointer; font-size: 1rem; width: 45px; text-align: center; }
        .main-footer { text-align: center; padding: 1rem; margin-top: 2rem; }
        .container { max-width: 800px; margin: 2rem auto; padding: 0 1rem; }
        
        /* MODIFICADO: Añadida la sombra */
        .module-section {
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            box-shadow: 7px 7px 27px -8px var(--shadow-color); /* Usando variable para mejor adaptabilidad */
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .module-section:hover {
             transform: translateY(-5px);
        }

        body.light-mode .module-section { background-color: var(--card-bg-light); border: 1px solid var(--border-color-light); }
        body.dark-mode .module-section { background-color: var(--card-bg-dark); border: 1px solid var(--border-color-dark); }
        
        .module-section h2 { margin-top: 0; color: var(--accent-color); border-bottom: 2px solid var(--accent-color); padding-bottom: 0.5rem; }
        .back-link { text-decoration: none; color: var(--accent-color); font-weight: bold; }
        mark { padding: 0.2em 0.4em; border-radius: 3px; }
        body.light-mode mark { background-color: var(--mark-bg-light); }
        body.dark-mode mark { background-color: var(--mark-bg-dark); color: var(--primary-text-dark); }
        .formula { text-align: center; font-size: 1.2rem; padding: 1rem; border: 2px dashed var(--accent-color); border-radius: 5px; margin: 1rem 0; }
        .bible-example { margin-top: 1.5rem; }
        .bible-example em { display: block; padding-left: 1rem; border-left: 3px solid #ccc; margin-bottom: 0.5rem; font-style: italic; }
        .exercise textarea { width: 100%; box-sizing: border-box; padding: 0.5rem; border-radius: 5px; border: 1px solid #ccc; margin: 1rem 0; font-size: 1rem; }
        .exercise button { background-color: var(--accent-color); color: white; border: none; padding: 0.7rem 1.5rem; border-radius: 5px; cursor: pointer; margin-right: 0.5rem; }
        #show-answer-btn { background-color: #6c757d; }
        .feedback { margin-top: 1rem; font-weight: bold; min-height: 1.2em; }
        .correct-answer-box { margin-top: 1rem; padding: 1rem; border-radius: 5px; }
        body.light-mode .correct-answer-box { background-color: var(--success-bg-light); border: 1px solid green; }
        body.dark-mode .correct-answer-box { background-color: var(--success-bg-dark); border: 1px solid #3d8b40; }
        .fab-container { position: fixed; bottom: 2rem; right: 2rem; z-index: 1001; }
        .fab { background-color: var(--accent-color); color: white; border: none; border-radius: 50%; width: 60px; height: 60px; font-size: 1.5rem; text-align: center; box-shadow: 0 4px 8px rgba(0,0,0,0.2); cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* Estilos para alinear iconos */
        h1, h2, .back-link, .exercise button, .bible-example p, .formula p {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .module-section ul {
            list-style: none;
            padding-left: 0;
        }
        .module-section li {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 0.5rem;
        }
        .fa-fw {
            text-align: center;
        }
    </style>
</head>
<body>

    <header class="main-header">
        <a href="../index.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Volver</a>
        <h1><i class="fa-solid fa-user-tag"></i>Personificación (Prosopopeya)</h1>
        <button id="theme-toggle" class="theme-toggle-btn" title="Cambiar tema">
            <i class="fa-solid fa-moon"></i>
        </button>
    </header>

    <main class="container" id="module-content">
       
        <section class="module-section">
            <h2><i class="fa-solid fa-circle-question"></i>1. ¿Qué es una Personificación?</h2>
            <p>La personificación o prosopopeya consiste en <strong>atribuir cualidades, sentimientos o acciones propias de seres humanos</strong> a animales, objetos inanimados o ideas abstractas. Es una forma de dar vida y cercanía a aquello que no la tiene.</p>
            <div class="formula">
                <p><i class="fa-solid fa-masks-theater"></i><strong>Objeto / Animal / Idea</strong> + <mark>Acción o Cualidad Humana</mark> = <strong>Vida y Expresividad</strong></p>
            </div>
            <p>Por ejemplo, en la frase "El viento <mark>susurraba secretos</mark> entre los árboles", le damos al viento la capacidad humana de "susurrar", creando una imagen mucho más poética y misteriosa que simplemente decir "el viento soplaba suavemente".</p>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-comments"></i>2. Ejemplos en la Vida Cotidiana</h2>
            <ul>
                <li><i class="fa-solid fa-sun fa-fw"></i>"El sol <mark>nos sonríe</mark> esta mañana." (Se le da al sol la capacidad de sonreír).</li>
                <li><i class="fa-solid fa-car-side fa-fw"></i>"El coche <mark>se quejó</mark> amargamente al arrancar con el frío." (Se le da al motor la capacidad de quejarse).</li>
                <li><i class="fa-solid fa-door-open fa-fw"></i>"La oportunidad <mark>tocó a mi puerta</mark> cuando menos lo esperaba." (A la idea abstracta de "oportunidad" se le da la acción de tocar).</li>
            </ul>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-book"></i>3. Personificaciones en la Biblia (Reina Valera 1960)</h2>
            <div class="bible-example">
                <em>"<mark>Los ríos batan las manos</mark>, los montes todos hagan regocijo." (Salmo 98:8)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> La naturaleza es personificada para participar en la alabanza a Dios. A los ríos se les atribuye la acción humana de "batir las manos" (aplaudir), y a los montes la emoción del "regocijo", creando una imagen poderosa de toda la creación adorando a su Creador.</p>
            </div>
            <hr>
            <div class="bible-example">
                <em>"...los montes y los collados levantarán canción delante de vosotros, y todos los árboles del campo <mark>darán palmadas de aplauso</mark>." (Isaías 55:12)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> Similar al ejemplo anterior, esta es una personificación de la alegría de la naturaleza. Los árboles no pueden aplaudir, pero al atribuirles esta acción humana, el profeta Isaías pinta un cuadro de gozo y celebración universal.</p>
            </div>
             <hr>
            <div class="bible-example">
                <em>"<mark>La sabiduría clama en las calles</mark>, alza su voz en las plazas." (Proverbios 1:20)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> Aquí se personifica una idea abstracta. La "sabiduría" no es una persona, pero se la describe como si lo fuera: una mujer que clama y alza su voz públicamente, indicando que sus enseñanzas están disponibles para todos los que quieran escuchar.</p>
            </div>
        </section>

        <section class="module-section exercise">
            <h2><i class="fa-solid fa-pencil-alt"></i>4. Ejercicio Práctico</h2>
            <p>Lee el siguiente versículo. Identifica qué elementos son personificados y qué acciones o sentimientos humanos se les atribuye.</p>
            <p><em>"Te vieron y <mark>tuvieron temor los montes</mark>; pasó la inundación de las aguas; <mark>el abismo dio su voz, a lo alto alzó sus manos</mark>." (Habacuc 3:10)</em></p>
            <textarea id="exercise-answer" rows="10" placeholder="Elemento Personificado 1: ...&#10;Acción/Cualidad Humana: ...&#10;Elemento Personificado 2: ...&#10;Acción/Cualidad Humana: ..."></textarea>
            
            <button id="check-answer-btn"><i class="fa-solid fa-check-circle"></i>Verificar Respuesta</button>
            <button id="show-answer-btn" style="display: none;"><i class="fa-solid fa-eye"></i>Ver Respuesta Correcta</button>
            
            <p id="feedback" class="feedback"></p>

            <div id="correct-answer" class="correct-answer-box" style="display: none;">
                <h4>Respuesta Detallada:</h4>
                <p><strong>Elemento Personificado 1:</strong> Los montes.</p>
                <p><strong>Acción/Cualidad Humana:</strong> Ver y tener temor.</p>
                <p><strong>Elemento Personificado 2:</strong> El abismo (el mar profundo).</p>
                <p><strong>Acción/Cualidad Humana:</strong> Dar su voz (gritar) y alzar sus manos.</p>
                <p><strong>Explicación:</strong> El profeta personifica a la naturaleza para describir su reacción sobrecogedora ante la presencia de Dios. Los montes sienten miedo y el mar profundo parece gritar y levantar sus olas como si fueran manos, creando una escena de poder y majestad divinos.</p>
            </div>
        </section>
    </main>
    
    <div class="fab-container">
        <button id="download-pdf" class="fab" title="Descargar como PDF">
             <i class="fa-solid fa-file-pdf"></i>
        </button>
    </div>

    <footer class="main-footer">
        <p>&copy; 2025 - Estudio de Figuras Literarias | Desarrollado por Julio Cesar Pineda Mora</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- LÓGICA 1: MANEJO DEL TEMA (MODO OSCURO/CLARO) CON ICONO DINÁMICO ---
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');

            const applyTheme = (theme) => {
                document.body.classList.remove('light-mode', 'dark-mode');
                document.body.classList.add(theme);
                localStorage.setItem('theme', theme);
                if (theme === 'dark-mode') {
                    themeIcon.className = 'fa-solid fa-sun';
                    themeToggle.title = 'Cambiar a modo claro';
                } else {
                    themeIcon.className = 'fa-solid fa-moon';
                    themeToggle.title = 'Cambiar a modo oscuro';
                }
            };
            themeToggle.addEventListener('click', () => {
                const newTheme = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';
                applyTheme(newTheme);
            });
            const storedTheme = localStorage.getItem('theme') || 'light-mode';
            applyTheme(storedTheme);

            // --- LÓGICA 2: EJERCICIO INTERACTIVO ---
            const checkAnswerBtn = document.getElementById('check-answer-btn');
            const showAnswerBtn = document.getElementById('show-answer-btn');
            const feedbackEl = document.getElementById('feedback');
            const correctAnswerEl = document.getElementById('correct-answer');
            checkAnswerBtn.addEventListener('click', () => {
                const answer = document.getElementById('exercise-answer').value.toLowerCase();
                showAnswerBtn.style.display = 'none';
                correctAnswerEl.style.display = 'none';
                if ((answer.includes("montes") && answer.includes("temor")) || (answer.includes("abismo") && (answer.includes("voz") || answer.includes("manos")))) {
                    feedbackEl.textContent = "¡Exacto! Has identificado muy bien las cualidades humanas atribuidas.";
                    feedbackEl.style.color = 'var(--accent-color)';
                } else {
                    feedbackEl.textContent = "Intenta de nuevo. Busca qué objeto inanimado realiza una acción humana.";
                    feedbackEl.style.color = 'red';
                    showAnswerBtn.style.display = 'inline-block';
                }
            });
            showAnswerBtn.addEventListener('click', () => {
                correctAnswerEl.style.display = 'block';
                showAnswerBtn.style.display = 'none';
            });

            // --- LÓGICA 3: GENERADOR DE PDF CON FEEDBACK DE CARGA ---
            document.getElementById('download-pdf').addEventListener('click', () => {
                const fabContainer = document.querySelector('.fab-container');
                const content = document.getElementById('module-content');
                const downloadBtn = document.getElementById('download-pdf');
                const originalIcon = downloadBtn.innerHTML;

                fabContainer.style.visibility = 'hidden';
                downloadBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';

                const opt = {
                    margin: 10,
                    filename: 'modulo-personificacion.pdf',
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true, letterRendering: true },
                    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                    pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
                };

                html2pdf().from(content).set(opt).save().then(() => {
                    fabContainer.style.visibility = 'visible';
                    downloadBtn.innerHTML = originalIcon;
                }).catch(err => {
                    console.error("Error al generar el PDF:", err);
                    fabContainer.style.visibility = 'visible';
                    downloadBtn.innerHTML = originalIcon;
                });
            });
        });
    </script>
</body>
</html>
