<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Epífora</title>

    <!-- Font Awesome para los iconos -->
    <!-- Añadido: Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
        
    <link rel="stylesheet" href="../css/modules.css">

</head>
<body>

    <header class="main-header">
        <a href="../index.html" class="back-link"><i class="fa-solid fa-arrow-left"></i> Volver</a>
        <h1><i class="fa-solid fa-flag-checkered"></i>Epífora</h1>
        <button id="theme-toggle" class="theme-toggle-btn" title="Cambiar tema"><i class="fa-solid fa-moon"></i></button>
    </header>

    <main class="container" id="module-content">
       
        <section class="module-section">
            <h2><i class="fa-solid fa-circle-question"></i>1. ¿Qué es una Epífora?</h2>
            <p>La epífora es lo contrario de la anáfora. Consiste en la <strong>repetición de una o varias palabras al final</strong> de frases o versos consecutivos. Su objetivo es crear un ritmo insistente y enfatizar la idea que se repite como una conclusión o un eco.</p>
            <div class="formula">
                <p>Frase 1 + <mark>Palabra(s) Repetida(s)</mark><br>Frase 2 + <mark>Palabra(s) Repetida(s)</mark></p>
            </div>
            <p>Por ejemplo: "No decía palabras, amaba <mark>en silencio</mark>. No hacía promesas, ayudaba <mark>en silencio</mark>". La repetición final subraya la cualidad principal de la acción.</p>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-comments"></i>2. Ejemplos en la Vida Cotidiana</h2>
            <ul>
                <li><i class="fa-solid fa-music fa-fw"></i>En canciones: "Todo, todo, todo <mark>eres tú</mark>. Mi casa y mi hogar, <mark>eres tú</mark>."</li>
                <li><i class="fa-solid fa-bullhorn fa-fw"></i>En discursos: "Lucharemos por la libertad. Defenderemos la libertad. Viviremos en libertad."</li>
                <li><i class="fa-solid fa-quote-left fa-fw"></i>En frases poéticas: "De padres ladrones, críanse con ladrones, estudian para ladrones..." (Cervantes).</li>
            </ul>
        </section>

        <section class="module-section">
            <h2><i class="fa-solid fa-book"></i>3. Epíforas en la Biblia (Reina Valera 1960)</h2>
            <div class="bible-example">
                <em>"Cuando yo era <mark>niño</mark>, hablaba como <mark>niño</mark>, pensaba como <mark>niño</mark>, juzgaba como <mark>niño</mark>; mas cuando ya fui hombre, dejé lo que era de <mark>niño</mark>." (1 Corintios 13:11)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> La repetición de la palabra "niño" al final de cada cláusula refuerza la idea de una etapa de la vida que se debe superar. El ritmo insistente creado por la epífora hace que la transición final ("dejé lo que era de niño") sea mucho más impactante.</p>
            </div>
            <hr>
            <div class="bible-example">
                <em>"¿Estás enojado contra los ríos, oh Jehová? ¿Contra los ríos tu furor, contra el mar <mark>tu ira</mark>...?" (Habacuc 3:8)</em>
                <p><i class="fa-solid fa-magnifying-glass-chart"></i><strong>Análisis:</strong> Aunque no es una repetición exacta de palabra, se usa el mismo concepto al final de las frases ("tu furor", "tu ira"), creando un efecto de epífora semántica que enfatiza la pregunta sobre la naturaleza de la ira divina.</p>
            </div>
        </section>

        <section class="module-section exercise">
            <h2><i class="fa-solid fa-pencil-alt"></i>4. Ejercicio Práctico</h2>
            <p>Lee el siguiente pasaje del Salmo 118. Identifica la frase que se repite al final de los versos y explica el efecto que produce esta repetición.</p>
            <p><em>"Alabad a Jehová, porque él es bueno; Porque para siempre es <mark>su misericordia</mark>. Diga ahora Israel, Que para siempre es <mark>su misericordia</mark>. Diga ahora la casa de Aarón, Que para siempre es <mark>su misericordia</mark>." (Salmo 118:1-3)</em></p>
            <textarea id="exercise-answer" rows="10" placeholder="Frase Repetida: ...&#10;Efecto que produce: ..."></textarea>
            
            <button id="check-answer-btn"><i class="fa-solid fa-check-circle"></i>Verificar Respuesta</button>
            <button id="show-answer-btn" style="display: none;"><i class="fa-solid fa-eye"></i>Ver Respuesta Correcta</button>
            
            <p id="feedback" class="feedback"></p>

            <div id="correct-answer" class="correct-answer-box" style="display: none;">
                <h4>Respuesta Detallada:</h4>
                <p><strong>Frase Repetida:</strong> "su misericordia".</p>
                <p><strong>Efecto que produce:</strong> La repetición funciona como una respuesta litúrgica o un estribillo de alabanza. Cada verso presenta una razón o un grupo que debe alabar, y la epífora responde con la razón fundamental: la eterna misericordia de Dios. Esto crea un énfasis abrumador en la principal cualidad de Dios que se está celebrando.</p>
            </div>
        </section>
    </main>
    
    <div class="fab-container"><button id="download-pdf" class="fab" title="Descargar como PDF"><i class="fa-solid fa-file-pdf"></i></button></div>
    <footer class="main-footer"><p>&copy; 2025 - Estudio de Figuras Literarias | Desarrollado por Julio Cesar Pineda Mora</p></footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            const applyTheme = (theme) => {
                document.body.classList.remove('light-mode', 'dark-mode');
                document.body.classList.add(theme);
                localStorage.setItem('theme', theme);
                if (theme === 'dark-mode') {
                    themeIcon.className = 'fa-solid fa-sun';
                    themeToggle.title = 'Cambiar a modo claro';
                } else {
                    themeIcon.className = 'fa-solid fa-moon';
                    themeToggle.title = 'Cambiar a modo oscuro';
                }
            };
            themeToggle.addEventListener('click', () => {
                const newTheme = document.body.classList.contains('dark-mode') ? 'light-mode' : 'dark-mode';
                applyTheme(newTheme);
            });
            const storedTheme = localStorage.getItem('theme') || 'light-mode';
            applyTheme(storedTheme);

            const checkAnswerBtn = document.getElementById('check-answer-btn');
            const showAnswerBtn = document.getElementById('show-answer-btn');
            const feedbackEl = document.getElementById('feedback');
            const correctAnswerEl = document.getElementById('correct-answer');
            checkAnswerBtn.addEventListener('click', () => {
                const answer = document.getElementById('exercise-answer').value.toLowerCase();
                showAnswerBtn.style.display = 'none';
                correctAnswerEl.style.display = 'none';
                if (answer.includes("su misericordia")) {
                    feedbackEl.textContent = "¡Correcto! Has identificado la epífora y su función como estribillo.";
                    feedbackEl.style.color = 'var(--accent-color)';
                } else {
                    feedbackEl.textContent = "Casi lo tienes. Fíjate en la frase que concluye cada línea del salmo.";
                    feedbackEl.style.color = 'red';
                    showAnswerBtn.style.display = 'inline-block';
                }
            });
            showAnswerBtn.addEventListener('click', () => {
                correctAnswerEl.style.display = 'block';
                showAnswerBtn.style.display = 'none';
            });

            document.getElementById('download-pdf').addEventListener('click', () => {
                const fabContainer = document.querySelector('.fab-container');
                const content = document.getElementById('module-content');
                const downloadBtn = document.getElementById('download-pdf');
                const originalIcon = downloadBtn.innerHTML;
                fabContainer.style.visibility = 'hidden';
                downloadBtn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i>';
                const opt = {
                    margin: 10,
                    filename: 'modulo-epifora.pdf',
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2, useCORS: true, letterRendering: true },
                    jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                    pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
                };
                html2pdf().from(content).set(opt).save().then(() => {
                    fabContainer.style.visibility = 'visible';
                    downloadBtn.innerHTML = originalIcon;
                }).catch(err => {
                    console.error("Error al generar el PDF:", err);
                    fabContainer.style.visibility = 'visible';
                    downloadBtn.innerHTML = originalIcon;
                });
            });
        });
    </script>
</body>
</html>